{{> header}}
{{> navbar}}

<script src='https://js.stripe.com/v3/'></script>

<style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        height: 100vh;
        display: block;
        background: #c9c9c9;
        font-family: Arial, Helvetica;
        margin: 10 auto;
        text-align: center;
    }

    .fineprint {
        margin: auto;
        width: 700px;
        font-size: 8pt;
        text-align: center;
    }

  .product-card {
        width: 800px;
        height: auto;
        display: flex;
        background: white;
        padding: 10px 10px 10px 10px;
        box-shadow: 0 0 8px #000;
        border-radius: 0px 0px 20px 20px;
        text-align: center;
        justify-content: center;
        margin: auto;
    }

    .product-card .left-column {
        width: 50%;
        font-size: 12px;
        display: table;
        justify-content: center;
        margin-top: 5px;
        margin-bottom: auto;
        margin-right: auto;
        margin-left: auto;
    }

    .product-card .left-column img {
        display: block;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 5px;
        border-radius: 15px 15px 15px 15px;
        border: 2px solid black;
        width: 100%;
        text-align: center;
        transition: 0.3s ease;
    }

    .product-card .left-column .image-choose {
        width: 330px;
        margin-bottom: 5px;
        text-align: center;
        margin: auto;
    }

    .product-card .left-column .image-choose button {
        border: 2px solid #E1E8EE;
        border-radius: 6px;
        padding: 2px 4px;
        font-size: 13px;
        color: #5E6977;
        background-color: #fff;
        transition: all .5s;
        margin-top: 2px;
        margin-bottom: 2px;
    }

    .product-card .left-column .image-choose button:hover,
    .product-card .left-column .image-choose button:focus {
        border: 2px solid #86939E;
        outline: none;
    }

    .product-card .left-column .image-choose button:active {
        border: 2px solid #00580A;
        color: #779876;
    }

    .product-card .left-column .image-choose a {
        color: #358ED7;
        text-decoration: none;
        font-size: 12px;
        display: table;
    }

    .product-card .left-column .image-choose a:before {
        height: 15px;
        width: 15px;
        border-radius: 50%;
        border: 2px solid rgba(53, 142, 215, 0.5);
        display: inline-block;
        text-align: center;
    }

    .product-card .right-column {
        width: 50%;
        position: relative;
        overflow: hidden;
        display: table;
        flex-direction: column;
        margin-top: auto;
        margin-bottom: auto;
        text-align: center;
    }

    .product-card .right-column .mapname {
        font-size: 24pt;
        font-weight: bold;
    }

    .product-card .right-column .rolename {
        font-size: 16pt;
        font-weight: bold;
        margin-top: 10px;
        margin-bottom: 10px;
    }

    .product-card .right-column .information {
        font-size: 11pt;
        position: relative;
    }

    .product-card .right-column .bullets {
        font-weight: bold;
        font-size: 12pt;
        margin-top: 5px;
        position: relative;
        line-height: 1.8;
    }

    .product-card .right-column .description {
        font-size: 8pt;
        maring-top: 5px;
        text-align: center;
        position: relative;
    }

    @media screen and (max-width:830px) {

        .fineprint {
            margin: auto;
            width: 380px;
            font-size: 8pt;
            text-align: center;
        }

        .product-card {
            width: 400px;
            height: auto;
            flex-direction: column;
            text-align: left;
        }

        .product-card .left-column {
            width: 100%;
            font-size: 9pt;
        }

        .product-card .left-column img {
            width: 90%;
        }
      
        .product-card .left-column .image-choose {
            width: 100%;
        }

        .product-card .left-column .image-choose button {
            border: 2px solid #E1E8EE;
            border-radius: 6px;
            padding: 1px 1px;
            font-size: 14px;
            color: #5E6977;
            background-color: #fff;
            transition: all .5s;
        }

        .product-card .right-column {
            width: 100%;
        }

        .product-card .right-column .mapname {
            font-size: 24pt;
            font-weight: bold;
        }

        .product-card .right-column .rolename {
            font-size: 16pt;
            font-weight: bold;
        }

        .product-card .right-column .bullets {
            font-weight: bold;
            font-size: 12pt;
            margin-top: 5px;
            margin-left: 5px;
            position: relative;
            line-height: 1.5;
        }

        .product-card .left-column .image-choose button {
            border: 2px solid #E1E8EE;
            border-radius: 6px;
            padding: 2px 2px;
            font-size: 10px;
            color: #5E6977;
            background-color: #fff;
            transition: all .5s;
            margin-top: 4px;
        }
    }

    @media screen and (max-width:400px) {
        .product-card {
            width: 300px;
            height: auto;
        }

        .product-card .right-column .bullets {
            font-weight: bold;
            font-size: 12pt;
            margin-top: 5px;
            position: relative;
            line-height: 1.4;
        }
    }

    @media screen and (max-width:320px) {
        .product-card {
            width: 280px;
            height: auto;
        }
    }

    .buttons {
        margin-top: 5px;
        margin-bottom: 5px;
    }
    .cancelButton {
        box-shadow: 0px 10px 16px -7px #cf866c;
        background:linear-gradient(to bottom, #d0451b 5%, #bc3315 100%);
        background-color:#d0451b;
        border-radius:10px;
        border:2px solid #942911;
        display:inline-block;
        cursor:pointer;
        color:#ffffff;
        font-family:Arial;
        font-size:18px;
        font-weight:bold;
        padding:8px 16px;
        text-decoration:none;
        text-shadow:0px 1px 0px #854629;
    }
    .cancelButton:hover {
        background:linear-gradient(to bottom, #bc3315 5%, #d0451b 100%);
        background-color:#bc3315;
    }
    .cancelButton:active {
        position:relative;
        top:1px;
    }

    .updateButton {
        box-shadow: 0px 10px 16px -7px #9acc85;
        background:linear-gradient(to bottom, #74ad5a 5%, #68a54b 100%);
        background-color:#74ad5a;
        border-radius:10px;
        border:2px solid #3b6e22;
        display:inline-block;
        cursor:pointer;
        color:#ffffff;
        font-family:Arial;
        font-size:18px;
        font-weight:bold;
        padding:8px 16px;
        text-decoration:none;
        text-shadow:0px 1px 0px #92b879;
    }
    .updateButton:hover {
        background:linear-gradient(to bottom, #68a54b 5%, #74ad5a 100%);
        background-color:#68a54b;
    }
    .updateButton:active {
        position:relative;
        top:1px;
    }
    #account, table {
        position:relative;
        table-layout: fixed;
        border: 1px solid black;
        width: 300px;  
    }
    #account {
        display: none;
    }

    .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      padding-top: 20px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    .modal-content {
      background-color: #00FF00;
      margin: auto;
      opacity: 0.9;
      padding: 10px;
      border: 2px solid #888;
      height: 40px;
      width: 80%;
    }

    .close {
      color: #aaaaaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }
</style>

<body>
    <div>
        <div class='product-card'>

        <table class="accountTable">
            <thead>
                <tr><th>Subscription:</th><th>Created:</th><th>Next Payment:</th><th>Cancel:</th></tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>

    <script>
        var array = ['cus_4354154235432', ]

        var bodyString = '';
        $.each(country, function(index, ctry) {
            bodyString += ('<tr><td>'+ctry+'</td><td>'+capital[index]+'</td></tr>');
        });

        var formData = JSON.stringify($("#myForm").serializeArray());
        $.ajax({
            type: "POST",
            url: "serverUrl",
            data: formData,
            success: function(){},
            dataType: "json",
            contentType : "application/json"
        });

        var updatButtons = document.getElementsByClassName("updateButton");
        for(var i = 0; i < updateButtons.length; i += 1){
            updateButtons[i].addEventListener('click', function (i) {
                stripe.redirectToCheckout({
                    sessionId: '{{session_id}}'
                }).then(handleResult);
            });
        }

        var cancelButtons = document.getElementsByClassName("cancelButton");
        for(var i = 0; i < cancelButtons.length; i += 1){
            cancelButtons[i].addEventListener('click', function (i) {
                var formData = JSON.stringify($("#myForm").serializeArray());
                $.ajax({
                    type: "POST",
                    url: "serverUrl",
                    data: formData,
                    success: function(){},
                    dataType: "json",
                    contentType : "application/json"
                });
                setTimeout(() => {
                    window.location.href = '/account';
                }, 3000);
            });
        }

        $('.accountTable tbody').html(bodyString);
    </script>
</body>

{{> footer}}
